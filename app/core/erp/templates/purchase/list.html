{% extends 'list.html' %}
{% load static %}

{% block head_list %}{% endblock %}

{# =================== CABECERA DE LA TABLA PRINCIPAL =================== #}
{% block columns %}
<tr>
    <th>#</th>
    <th>Proveedor</th>
    <th>Fecha</th>
    <th>Estado</th>
    <th>Opciones</th>
</tr>
{% endblock %}

{% block rows %}
{% endblock %}

{% block extra_buttons %}
<a href="{% url 'erp:purchase_create' %}" class="btn btn-primary btn-flat">
    <i class="fas fa-plus"></i> Nueva compra
</a>
{% endblock %}

{# =================== CONTENIDO: LISTADO + MODALES =================== #}
{% block content %}
    {{ block.super }}

    <!-- =================================================
         MODAL 1: DETALLE DE PRODUCTOS DE LA COMPRA
    ================================================== -->
    <div class="modal fade" id="modalDetail" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">

                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-search"></i> Detalle de productos de la compra
                    </h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Cerrar">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>

                <div class="modal-body">
                    <table id="tblDetail" class="table table-bordered table-striped">
                        <thead>
                            <tr>
                                <th>Producto</th>
                                <th>Categor√≠a</th>
                                <th>Cant.</th>
                                <th>P. Compra</th>
                                <th>Vence</th>
                                <th>Subtotal</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">
                        Cerrar
                    </button>
                </div>

            </div>
        </div>
    </div>

    <!-- =================================================
         MODAL 2: EDITAR DETALLE (P. COMPRA + VENCIMIENTO)
    ================================================== -->
    <div class="modal fade" id="modalEditDetail" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">

                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-edit"></i> Editar detalle de compra
                    </h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Cerrar">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>

                <div class="modal-body">
                    <input type="hidden" id="det_id">

                    <div class="form-group">
                        <label for="edit_purchase_price">Precio de compra (S/)</label>
                        <input type="number" step="0.01" min="0" class="form-control" id="edit_purchase_price">
                    </div>

                    <div class="form-group">
                        <label for="edit_expiration_date">Fecha de vencimiento</label>
                        <input type="date" class="form-control" id="edit_expiration_date">
                    </div>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">
                        Cancelar
                    </button>
                    <button type="button" class="btn btn-primary" id="btnSaveDetail">
                        <i class="fas fa-save"></i> Guardar cambios
                    </button>
                </div>

            </div>
        </div>
    </div>
{% endblock %}

{% block javascript %}
    <script src="{% static 'purchase/js/list.js' %}"></script>
{% endblock %}
